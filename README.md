# remod-go

Утилита для массового переименования Go модулей в проекте с автоматической реинициализацией Git репозитория.

## Описание

`remod-go` - это инструмент командной строки, который помогает изменить имя модуля Go во всем проекте. Утилита автоматически:

- Находит и изменяет имя модуля в `go.mod` файле
- Обновляет все импорты в `.go` файлах
- Реинициализирует Git репозиторий (удаляет `.git` и создает новый)
- Обрабатывает файлы параллельно для повышения производительности

## Установка

### Из исходного кода

```bash
git clone https://github.com/vyantik/remod-go.git
cd remod-go
go build -o remod-go cmd/main.go
```

### Добавить в PATH (опционально)

```bash
sudo cp remod-go /usr/local/bin/
```

## Использование

```bash
remod-go <путь_к_директории> <новое_имя_модуля>
```

### Параметры

- `путь_к_директории` - путь к корневой директории Go проекта
- `новое_имя_модуля` - новое имя модуля (например, `github.com/newuser/newproject`)

### Примеры

```bash
# Изменить модуль в текущей директории
remod-go . github.com/myuser/myproject

# Изменить модуль в указанной директории
remod-go /path/to/project github.com/company/newproject
```

## Что делает утилита

1. **Поиск go.mod файла**: Находит файл `go.mod` в указанной директории
2. **Изменение имени модуля**: Обновляет строку `module` в `go.mod`
3. **Обработка Go файлов**: Рекурсивно проходит по всем `.go` файлам и обновляет импорты
4. **Параллельная обработка**: Использует горутины для одновременной обработки директорий
5. **Реинициализация Git**: Удаляет существующий `.git` и создает новый репозиторий

## Особенности

- **Параллельная обработка**: Директории обрабатываются одновременно с ограничением в 10 параллельных операций
- **Безопасная замена**: Корректно обрабатывает импорты в кавычках и без них
- **Подробное логирование**: Детальные логи всех операций
- **Обработка ошибок**: Graceful handling ошибок доступа к файлам и директориям

## Логирование

Утилита предоставляет подробные логи о процессе выполнения:

- `[MOD NAME]` - текущее имя модуля
- `[TO REPLACE]` - имя модуля для замены
- `[FILE]` - обрабатываемый файл
- `[DIR]` - обрабатываемая директория
- `[FILE CHANGED]` - файл был изменен
- `[FILE UNCHANGED]` - файл не требует изменений
- `[GIT INIT]` - процесс инициализации Git
- `[GIT REMOVE]` - процесс удаления Git репозитория
- `[SKIP]` - файл пропущен (не .go файл)
- `[ERROR]` - ошибка доступа к директории

## Требования

- Go 1.24.4 или выше
- Git (для реинициализации репозитория)

## Безопасность

⚠️ **Внимание**: Утилита удаляет существующий Git репозиторий и создает новый. Убедитесь, что у вас есть резервная копия или все изменения закоммичены перед использованием.

## Пример вывода

```
2024/01/01 12:00:00   [MOD NAME]  github.com/olduser/oldproject
2024/01/01 12:00:00   [FILE]  go.mod
2024/01/01 12:00:00   [TO REPLACE]  github.com/olduser/oldproject
2024/01/01 12:00:00   [FILE CHANGING]  go.mod
2024/01/01 12:00:00   [FILE CHANGED]  go.mod
2024/01/01 12:00:00   [DIR]  /path/to/project
2024/01/01 12:00:00   [FILE]  main.go
2024/01/01 12:00:00   [FILE CHANGING]  main.go
2024/01/01 12:00:00   [FILE CHANGED]  main.go
2024/01/01 12:00:00   [REMOVE GIT]  /path/to/project/.git
2024/01/01 12:00:00   [GIT REMOVE SUCCESS]  /path/to/project/.git
2024/01/01 12:00:00   [GIT INIT]  /path/to/project
2024/01/01 12:00:00   [GIT INIT SUCCESS]  /path/to/project
```

## Производительность

Утилита использует параллельную обработку для повышения производительности:

- До 10 одновременных операций обработки директорий
- Семафор для контроля количества параллельных горутин
- Эффективная обработка больших проектов

## Лицензия

Этот проект распространяется под лицензией MIT. См. файл LICENSE для подробностей.

## Вклад в проект

Вклады приветствуются! Пожалуйста, создавайте issue или pull request для предложений по улучшению.
